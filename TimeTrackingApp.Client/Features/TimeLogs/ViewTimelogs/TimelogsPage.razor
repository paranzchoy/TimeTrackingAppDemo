@page "/timelogs"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

<h3>My Time Logs</h3>

@if (_timelogs == null)
{
    <p><em>Loading...</em></p>
}
else if (!_timelogs.Any())
{
    <div class="d-flex justify-content-between align-items-center gap-3 mt-5 mb-5">
        <div class="hstack align-items-center gap-3">
            <FluentButton Appearance="Appearance.Accent"
                          IconStart="@(new Icons.Regular.Size20.Add())">
                Add timelog
            </FluentButton>
        </div>
    </div>
    <hr />

    <p>No time logs found.</p>
}
else
{
    <div class="d-flex justify-content-between align-items-center gap-3 mt-5 mb-5">
        <div class="hstack align-items-center gap-3">
            <FluentButton Appearance="Appearance.Accent"
                          IconStart="@(new Icons.Regular.Size20.Add())">
                Add timelog
            </FluentButton>
        </div>
    </div>
    <hr />

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Time In</th>
                <th>Time Out</th>
                <th>Total Hours</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var log in _timelogs)
            {
                <tr>
                    <td>@log.TimeIn.ToString("yyyy-MM-dd")</td>
                    <td>@log.TimeIn.ToString("hh:mm tt")</td>
                    <td>@(log.TimeOut?.ToString("hh:mm tt") ?? "—")</td>
                    <td>@(log.TotalHours?.ToString("F2") ?? "—")</td>
                </tr>
            }
        </tbody>
    </table>
}
